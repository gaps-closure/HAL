// An example configuration file for the CLOSURE HAL service

// List of HAL interfaces.
// Only the first 5 parameters are required;
// optional parameters are used only for certain interface types.
devices = 
(
  {
   // HAL - Application API
   enabled      = 1;
   id           = "xdd0";
   path         = "./zc/zc";
   model        = "sdh_ha_v1";
   comms        = "ipc";
   mode_in      = "sub";
   mode_out     = "pub";
  },
  {
    // xdd1 Emulated Serial Port (network connections are defined in network emulator)
    enabled      = 1;
    id           = "xdd1";
    path         = "/dev/vcom1";
    model        = "sdh_be_v1";
    comms        = "tty";
  },
  {
    // xdd2 Emulated Serial Port (network connections are defined in network emulator) - uses old packet model (v2)
    enabled      = 0;
    id           = "xdd2";
    path         = "/dev/vcom1";
    model        = "sdh_be_v2";
    comms        = "tty";
  },
  {
    // xdd3 Emulated UDP network connetion
    enabled      = 1;
    id           = "xdd3";
    path         = "lo";
    model        = "sdh_bw_v1";
    comms        = "udp";
    addr_out     = "127.0.0.1";    // address of listener on Cross Domain Gateway
    port_out     = 50000;          // port of listener on Cross Domain Gateway
    addr_in      = "127.0.0.1";    // address of listener on HAL
    port_in      = 6788;           // port of listener on HAL
  },
  {
    // xdd4 Emulaed TCP Network connetion (using localhost for testing)
    // (replace _out with _in to reverse listener roles)
    enabled      = 1;
    id           = "xdd4";
    path         = "lo";
    model        = "sdh_bw_v1";
    comms        = "tcp";
    addr_out     = "127.0.0.1";
    port_out     = 6787;
  },
  {
    // xdd6 ILIP Serial Ports
    enabled      = 1;
    id           = "xdd6";
    path         = "/dev/gaps_ilip_0_root";
    model        = "sdh_be_v3";
    comms        = "ilp";
    path_r       = "/dev/gaps_ilip_1_read";
    path_w       = "/dev/gaps_ilip_1_write";
    from_mux     = 10;
  },
  {
    // xdd7 ILIP Serial Ports
    enabled      = 1;
    id           = "xdd7";
    path         = "/dev/gaps_ilip_0_root";
    model        = "sdh_be_v3";
    comms        = "ilp";
    path_r       = "/dev/gaps_ilip_2_read";
    path_w       = "/dev/gaps_ilip_2_write";
    from_mux     = 11;
  }
)

// Routing Maps for HAL
maps =
(
  // MUX 1 and 2 using xdd3
  {
    from_dev = "xdd0";
    from_mux = 1;
    from_sec = 1;
    from_typ = 1;
    to_dev   = "xdd3";
    to_ctag  = 65793;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  {
    from_dev  = "xdd3";
    from_ctag = 131585;
    to_dev    = "xdd0";
    to_mux    = 2;
    to_sec    = 2;
    to_typ    = 1;
    codec     = "NULL";        /* no adu transform in HAL */
  },
  // MUX 3 and 4 using xdd4
  {
    from_dev = "xdd0";
    from_mux = 3;
    from_sec = 3;
    from_typ = 1;
    to_dev   = "xdd4";
    to_ctag  = 197377;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  {
    // Routing from Network to Application
    from_dev = "xdd4";
    from_ctag = 263169;       /* 0x00040401 */
    to_dev   = "xdd0";
    to_mux   = 4;
    to_sec   = 4;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  // MUX 5 and 6 using xdd1
  {
    from_dev = "xdd0";
    from_mux = 5;
    from_sec = 5;
    from_typ = 1;
    to_dev   = "xdd1";
    to_mux   = 5;
    to_sec   = 5;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  {
    from_dev = "xdd1";
    from_mux = 6;
    from_sec = 6;
    from_typ = 1;
    to_dev   = "xdd0";
    to_mux   = 6;
    to_sec   = 6;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  // MUX 7 and 8 using xdd1
  {
    from_dev = "xdd0";
    from_mux = 7;
    from_sec = 7;
    from_typ = 1;
    to_dev   = "xdd1";
    to_mux   = 7;
    to_sec   = 7;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  {
    from_dev = "xdd1";
    from_mux = 8;
    from_sec = 8;
    from_typ = 1;
    to_dev   = "xdd0";
    to_mux   = 8;
    to_sec   = 8;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  // MUX 10 using xdd6 loopback
  {
    from_dev = "xdd0";
    from_mux = 10;
    from_sec = 10;
    from_typ = 1;
    to_dev   = "xdd6";
    to_mux   = 10;
    to_sec   = 10;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  {
    from_dev = "xdd6";
    from_mux = 10;
    from_sec = 10;
    from_typ = 1;
    to_dev   = "xdd0";
    to_mux   = 10;
    to_sec   = 10;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  // MUX 11 using xdd7 loopback
  {
    from_dev = "xdd0";
    from_mux = 11;
    from_sec = 11;
    from_typ = 1;
    to_dev   = "xdd7";
    to_mux   = 11;
    to_sec   = 11;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  },
  {
    from_dev = "xdd7";
    from_mux = 11;
    from_sec = 11;
    from_typ = 1;
    to_dev   = "xdd0";
    to_mux   = 11;
    to_sec   = 11;
    to_typ   = 1;
    codec    = "NULL";        /* no adu transform in HAL */
  }
)
